<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>AMI User Interface</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
    }
    #chatbox {
      width: 80%;
      height: 200px;
      border: 1px solid #ccc;
      padding: 10px;
      overflow-y: auto;
      margin-bottom: 30px;
      border-radius: 8px; 
      border: 2px solid #888;
      
      background-color: rgba(255, 255, 255, 0.8);
    }
    #userInput {
      width: 76%;
      padding: 8px;
      border-radius: 6px;
      border: 2px solid #888;

      background-color: rgba(255, 255, 255, 0.8);
    }
    #sendBtn {
      padding: 8px 12px;
      background-color: #a0c5eb;
      border-radius: 6px;
      border: 2px solid #888;
    }
    .bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("{{ url_for('static', filename = 'background.png') }}");
      background-size: cover;
      background-position: center;
      opacity: 0.2;   
      z-index: -1;    
    }
  </style>
</head>
<body>
  <div class = "bg"></div>

  <header style="display: flex; align-items: center; margin-bottom: 20px;">  
    <img src = "{{ url_for('static', filename = 'aim_logo.png') }}" alt = "AIM LOGO" style = "height: 100px; margin-right: 15px;">
    <h1>2025 AMI</h1>
  </header>
  
  <div style = "display: flex; gap: 20px">
    <div style = "flex: 1;">
      <div id="chatbox"></div>
      <input type="text" id="userInput" placeholder="메시지를 입력하세요">
      <button id="sendBtn">보내기</button>
    </div>

    <div style = "flex-shrink: 0;">
      <img src = "{{ url_for('static', filename = 'side_image.png') }}" alt = "column image" style = "height: 400px; border-radius: 10px;">
    </div>
  </div>
  
  <script>
    const chatbox = document.getElementById("chatbox");
    const input = document.getElementById("userInput");
    const button = document.getElementById("sendBtn");

    const sendMessage = async () => {
      const userText = input.value.trim();
      if (userText === "") return;
      
      input.value = "";
      chatbox.innerHTML += `<p><b>나 : </b> ${userText}</p>`;

      const response = await fetch("/ask", {
        method: "POST",
        headers: { "Content-Type" : "application/json" },
        body: JSON.stringify({ text : userText })
      });

      const botReply = await response.json();
      chatbox.innerHTML += `<p><b>AMI : </b> ${botReply.reply}</p>`;

      chatbox.scrollTop = chatbox.scrollHeight;
    };

    button.addEventListener("click", sendMessage);

    input.addEventListener("keypress", (event) => {
      if (event.key === "Enter") {
        sendMessage();
      }
    });
  </script>
</body>
</html>